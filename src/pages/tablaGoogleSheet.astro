---
import LayoutSidebar from '../app/LayoutSidebar.astro';
import { supabase } from "../lib/supabase";
import { looker_url } from '../lib/supabase';
import GsIframe from '../components/GsIframe.jsx'
// const { cookies, redirect } = Astro;

// const accessToken = cookies.get("sb-access-token");
// const refreshToken = cookies.get("sb-refresh-token");

// if (!accessToken || !refreshToken) {
//   return redirect("/authentication/sign-in");
// }

// const { data, error } = await supabase.auth.setSession({
//   refresh_token: refreshToken.value,
//   access_token: accessToken.value,
// });

// if (error) {
//   cookies.delete("sb-access-token", {
//     path: "/",
//   });
//   cookies.delete("sb-refresh-token", {
//     path: "/",
//   });

//   return redirect("/authentication/sign-in");
// }

// const email = data?.user?.email;

const { cookies, redirect } = Astro;

const dataUser = cookies.get("sb-user");
const user = JSON.parse(dataUser?.value);
---

<LayoutSidebar>

		<div class="mb-4 mt-12">
			
			<h1
				class="text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"
			>
				Matriz
			</h1>
		</div> 
    <div class="col-span-full  h-screen">



		<GsIframe renderizar={user.direccion}/>
    </div>
    
    

</LayoutSidebar>
